// RASTERPROPMONITOR configured with KOSPROP Monitor
// Modified By Masset Stephane
// Lic. Attribution-NonCommercial-ShareAlike 3.0 Unported (CC BY-NC-SA 3.0)

PROP
{
  name = MAMFD40x20KOS_B

  // module Principale RasterPropMonitor For screen
  MODULE
  {
	name = RasterPropMonitor
	screenTransform = FlatMon40x10Screen
	fontTransform = JSI/RasterPropMonitor/Library/Fonts/baseFont
	textureLayerID = _Emissive            // Name of texture layer to work with on the screen surface.
	screenWidth = 90                      // Screen width in letters.(40)
	screenHeight = 22                     // Screen height in lines. (20)
	screenPixelWidth = 720                // Width of the generated screen texture in pixels.
	screenPixelHeight = 704               // Height of the generated screen texture in pixels.
	fontLetterWidth = 16                  // Width of a font character.
	fontLetterHeight = 32                 // Height of a font character.
	cameraAspect = 1
	fontDefinition = JSI/RasterPropMonitor/Library/Fonts/fontDefinition.txt
	
	// We can have as many extra fonts as we like.
	extraFont = JSI/RasterPropMonitor/Library/Fonts/extraFont1
	extraFont = JSI/RasterPropMonitor/Library/Fonts/hudfont
	extraFont = ASET/ASET_Props/MFDs/Fonts/extraFont1
	extraFont = ASET/ASET_Props/MFDs/Fonts/InvertedMainFont
	extraFont = ASET/ASET_Props/MFDs/Fonts/InvertedExtraFont
	extraFont = ASET/ASET_Props/MFDs/Fonts/Symbols01
	
	// Notice: We redraw the screen every other frame, so the cameras are smooth...
	refreshDrawRate = 2
	// We recalculate the text once every ten frames:
	refreshTextRate = 10
	// And we compute the more complicated data once every twenty frames
    refreshDataRate = 20
	
	buttonClickSound = JSI/RasterPropMonitor/Library/Sounds/buttonbeep
	buttonClickVolume = 0.6
	globalButtons = button_UP,button_DOWN,button_ENTER,button_ESC,button_HOME,button_RIGHT,button_LEFT,buttonR9,buttonR10, button_STBY, buttonR1, buttonR2, buttonR3, buttonR4, buttonR5, buttonR6, buttonR7, button_A, button_B, button_C, button_D, button_E, button_F, button_G, button_PAGE,buttonPAGE_UP, buttonPAGE_DOWN

	noSignalTextureURL = JSI/RasterPropMonitor/Library/Textures/nosignal

	PAGE		
	{
		name = home
		button = buttonPAGE_UP
		text = MA_IVASPARTS/MFDs/MAKosMFD40x20/KOS_home40x20.txt
		default = yes
		textureInterlayURL = MA_IVASPARTS/MFDs/MAKosMFD40x20/EcranTitre

		CONTEXTREDIRECT
			{
				redirect = DOWN, kOSRPMPage_A
			}
	}

	//----------------- kOS Page Definition ---------------------
	PAGE
	{
		//Main
		name = kOSRPMPage
		button = button_PAGE
		textureURL = MA_IVASPARTS/MFDs/MAKosMFD40x20/kPM40x20Alt			
		text = KOS software not installed.
		disableSwitchingTo = home
		PAGEHANDLER
		{
			//Class name is kOS Monitor
			name = kOSMonitor
				
			//This is the terminal template
			template = MA_IVASPARTS/MFDs/MAKosMFD40x20/Page_A.txt
				
			//Processors are named sanely
			method = ContentProcessor
			buttonClickMethod = ButtonProcessor
				
			//Labels
			buttonEmptyLabel = -----
			flagEmptyLabel = FLAG
				
			//kOSProcessor TermWindow
			consoleWidth = 90
			consoleHeight = 19

			//label indicator keyboard
			keyboardActiveLabel = - KBRD -
				
			//Text Tint
			textTint = [#FFFFFFff]
			textTintColored = [#d8dcd6ff] // light grey - https://xkcd.com/color/rgb/
			textTintUnpowered = [#ffffff3e]

			//Keyboard Inactive Tint
			keyboardInactiveTint = [#002D4A00]
		}

		CONTEXTREDIRECT
			{
				redirect = UP, home
				redirect = DOWN, home 
			}		
	}
	
	// Redirecte Pages
	PAGE // UP
	{
		name = UP
		button = buttonPAGE_UP
	}
	PAGE // DOWN
	{
		name = DOWN
		button = buttonPAGE_DOWN
	}
	}

  // ----------------- Buttons Configuration --------------------
	// Knob For screen Brightness
	// Mapped variable Control for Brightness animation
	RPM_MAPPED_VARIABLE
	{
	  sourceVariable = MFD_Brightness_KosB
	  sourceRange = 0,600
	  mappedRange = 0,600
	}
	// ---- input ---- 
	MODULE
	{
	    name = JSINumericInput
	    perPodPersistenceName = MAPPED_MFD_Brightness_KosB 
	    defaultValue = 600
	    stepSize = 15
	    minValue = 0
	    maxValue = 600
	    reverse = false
	    loopInput = false
	    USERINPUTSET
	    {
			switchTransform = KnobColliderPlus
			increment = 15
			switchSound = ASET/ASET_Avionics/ModernPack/Sounds/hud-rotaryclick02
			switchSoundVolume = 2
	    }
		USERINPUTSET
	    {
			switchTransform = KnobColliderMinus
			increment = -15
			switchSound = ASET/ASET_Avionics/ModernPack/Sounds/hud-rotaryclick02
			switchSoundVolume = 2
	    }
	}
	// ---- Switcher Animation ----	
	MODULE
	{
		name = JSIVariableAnimator
		refreshRate = 1
		VARIABLESET	
		{		
			controlledTransform  = KnobGrp
			localRotationStart = 0, 0, -143
			localRotationEnd  = 0, 0, 90
			variableName = PERSISTENT_MAPPED_MFD_Brightness_KosB 
			scale = 0,600
			longPath = yes
			maxRateChange = 5.0
		}
		VARIABLESET
		{
			scale = 0,600
			variableName = PERSISTENT_MAPPED_MFD_Brightness_KosB
			animationName = Flat_Bright // anim for _EmissiveColor
			maxRateChange = 5.0
		}
	}
	// ----------- buttons animations -----------	
	// button A
	MODULE
	{
		name = JSIActionGroupSwitch
		animationName = MFDani_A
		switchTransform = button_A
		actionName = dummy
		needsElectricCharge = true
		reverse = true
	}	
	// button B
	MODULE
	{
		name = JSIActionGroupSwitch
		animationName = MFDani_B
		switchTransform = button_B
		actionName = dummy
		needsElectricCharge = true
		reverse = true
	}
	// button C
	MODULE
	{
		name = JSIActionGroupSwitch
		animationName = MFDani_C
		switchTransform = button_C
		actionName = dummy
		needsElectricCharge = true
		reverse = true
	}
	// button D
	MODULE
	{
		name = JSIActionGroupSwitch
		animationName = MFDani_D
		switchTransform = button_D
		actionName = dummy
		needsElectricCharge = true
		reverse = true
	}
	// button E
	MODULE
	{
		name = JSIActionGroupSwitch
		animationName = MFDani_E
		switchTransform = button_E
		actionName = dummy
		needsElectricCharge = true
		reverse = true
	}
	// button F
	MODULE
	{
		name = JSIActionGroupSwitch
		animationName = MFDani_F
		switchTransform = button_F
		actionName = dummy
		needsElectricCharge = true
		reverse = true
	}
	// button G
	MODULE
	{
		name = JSIActionGroupSwitch
		animationName = MFDani_G
		switchTransform = button_G
		actionName = dummy
		needsElectricCharge = true
		reverse = true
	}
	// button R1
	MODULE
	{
		name = JSIActionGroupSwitch
		animationName = MFDani_R1
		switchTransform = buttonR1
		actionName = dummy
		needsElectricCharge = true
		reverse = true
	}
	// button R2
	MODULE
	{
		name = JSIActionGroupSwitch
		animationName = MFDani_R2
		switchTransform = buttonR2
		actionName = dummy
		needsElectricCharge = true
		reverse = true
	}
	// button R3
	MODULE
	{
		name = JSIActionGroupSwitch
		animationName = MFDani_R3
		switchTransform = buttonR3
		actionName = dummy
		needsElectricCharge = true
		reverse = true
	}
	// button R4
	MODULE
	{
		name = JSIActionGroupSwitch
		animationName = MFDani_R4
		switchTransform = buttonR4
		actionName = dummy
		needsElectricCharge = true
		reverse = true
	}
	// button R5
	MODULE
	{
		name = JSIActionGroupSwitch
		animationName = MFDani_R5
		switchTransform = buttonR5
		actionName = dummy
		needsElectricCharge = true
		reverse = true
	}
	// button R6
	MODULE
	{
		name = JSIActionGroupSwitch
		animationName = MFDani_R6
		switchTransform = buttonR6
		actionName = dummy
		needsElectricCharge = true
		reverse = true
	}
	// button R7
	MODULE
	{
		name = JSIActionGroupSwitch
		animationName = MFDani_R7
		switchTransform = buttonR7
		actionName = dummy
		needsElectricCharge = true
		reverse = true
	}
	// button R9
	MODULE
	{
		name = JSIActionGroupSwitch
		animationName = MFDani_R9
		switchTransform = buttonR9
		actionName = dummy
		needsElectricCharge = true
		reverse = true
	}
	// button R10
	MODULE
	{
		name = JSIActionGroupSwitch
		animationName = MFDani_R10
		switchTransform = buttonR10
		actionName = dummy
		needsElectricCharge = true
		reverse = true
	}
	// button LEFT
	MODULE
	{
		name = JSIActionGroupSwitch
		animationName = MFDani_LEFT
		switchTransform = button_LEFT
		actionName = dummy
		needsElectricCharge = true
		reverse = true
	}
	// button RIGHT
	MODULE
	{
		name = JSIActionGroupSwitch
		animationName = MFDani_RIGHT
		switchTransform = button_RIGHT
		actionName = dummy
		needsElectricCharge = true
		reverse = true
	}
	// button PAGE
	MODULE
	{
		name = JSIActionGroupSwitch
		animationName = MFDani_PAGE
		switchTransform = button_PAGE
		actionName = dummy
		needsElectricCharge = true
		reverse = true
	}
	// button UP
	MODULE
	{
		name = JSIActionGroupSwitch
		animationName = MFDani_UP
		switchTransform = button_UP
		actionName = dummy
		needsElectricCharge = true
		reverse = true
	}
	// button DOWN
	MODULE
	{
		name = JSIActionGroupSwitch
		animationName = MFDani_DOWN
		switchTransform = button_DOWN
		actionName = dummy
		needsElectricCharge = true
		reverse = true
	}
	// button ENTER
	MODULE
	{
		name = JSIActionGroupSwitch
		animationName = MFDani_ENTER
		switchTransform = button_ENTER
		actionName = dummy
		needsElectricCharge = true
		reverse = true
	}
	// button ESC
	MODULE
	{
		name = JSIActionGroupSwitch
		animationName = MFDani_ESC
		switchTransform = button_ESC
		actionName = dummy
		needsElectricCharge = true
		reverse = true
	}
	// button HOME
	MODULE
	{
		name = JSIActionGroupSwitch
		animationName = MFDani_HOME
		switchTransform = button_HOME
		actionName = dummy
		needsElectricCharge = true
		reverse = true
	}
	// button STBY
	MODULE
	{
		name = JSIActionGroupSwitch
		animationName = MFDani_STBY
		switchTransform = button_STBY
		actionName = dummy
		needsElectricCharge = true
		reverse = true
	}

	// ------------ MFD Buttons Backlights ------------
	MODULE
	{
		name = JSICallbackAnimator
		variableName = CUSTOM_ALCOR_BACKLIGHT_ON
 		VARIABLESET
		{
			coloredObject = MFD_button_A
			passiveColor = 0,0,0,255
			activeColor = COLOR_ASET_PUSHBUTTON_BACKLIGHT_ACTIVECOLOR
			scale = 0.5,1.1
		}
		VARIABLESET
		{
			coloredObject = MFD_button_B
			passiveColor = 0,0,0,255
			activeColor = COLOR_ASET_PUSHBUTTON_BACKLIGHT_ACTIVECOLOR
			scale = 0.5,1.1
		}
		VARIABLESET
		{
			coloredObject = MFD_button_C
			passiveColor = 0,0,0,255
			activeColor = COLOR_ASET_PUSHBUTTON_BACKLIGHT_ACTIVECOLOR
			scale = 0.5,1.1
		}
		VARIABLESET
		{
			coloredObject = MFD_button_D
			passiveColor = 0,0,0,255
			activeColor = COLOR_ASET_PUSHBUTTON_BACKLIGHT_ACTIVECOLOR
			scale = 0.5,1.1
		}
		VARIABLESET
		{
			coloredObject = MFD_button_E
			passiveColor = 0,0,0,255
			activeColor = COLOR_ASET_PUSHBUTTON_BACKLIGHT_ACTIVECOLOR
			scale = 0.5,1.1
		}
		VARIABLESET
		{
			coloredObject = MFD_button_F
			passiveColor = 0,0,0,255
			activeColor = COLOR_ASET_PUSHBUTTON_BACKLIGHT_ACTIVECOLOR
			scale = 0.5,1.1
		}
		VARIABLESET
		{
			coloredObject = MFD_button_G
			passiveColor = 0,0,0,255
			activeColor = COLOR_ASET_PUSHBUTTON_BACKLIGHT_ACTIVECOLOR
			scale = 0.5,1.1
		}
		VARIABLESET
		{
			coloredObject = MFD_buttonR1
			passiveColor = 0,0,0,255
			activeColor = COLOR_ASET_PUSHBUTTON_BACKLIGHT_ACTIVECOLOR
			scale = 0.5,1.1
		}
		VARIABLESET
		{
			coloredObject = MFD_buttonR2
			passiveColor = 0,0,0,255
			activeColor = COLOR_ASET_PUSHBUTTON_BACKLIGHT_ACTIVECOLOR
			scale = 0.5,1.1
		}
		VARIABLESET
		{
			coloredObject = MFD_buttonR3
			passiveColor = 0,0,0,255
			activeColor = COLOR_ASET_PUSHBUTTON_BACKLIGHT_ACTIVECOLOR
			scale = 0.5,1.1
		}
		VARIABLESET
		{
			coloredObject = MFD_buttonR4
			passiveColor = 0,0,0,255
			activeColor = COLOR_ASET_PUSHBUTTON_BACKLIGHT_ACTIVECOLOR
			scale = 0.5,1.1
		}
		VARIABLESET
		{
			coloredObject = MFD_buttonR5
			passiveColor = 0,0,0,255
			activeColor = COLOR_ASET_PUSHBUTTON_BACKLIGHT_ACTIVECOLOR
			scale = 0.5,1.1
		}
		VARIABLESET
		{
			coloredObject = MFD_buttonR6
			passiveColor = 0,0,0,255
			activeColor = COLOR_ASET_PUSHBUTTON_BACKLIGHT_ACTIVECOLOR
			scale = 0.5,1.1
		}
		VARIABLESET
		{
			coloredObject = MFD_buttonR7
			passiveColor = 0,0,0,255
			activeColor = COLOR_ASET_PUSHBUTTON_BACKLIGHT_ACTIVECOLOR
			scale = 0.5,1.1
		}
		VARIABLESET
		{
			coloredObject = MFD_buttonR9
			passiveColor = 0,0,0,255
			activeColor = COLOR_ASET_PUSHBUTTON_BACKLIGHT_ACTIVECOLOR
			scale = 0.5,1.1
		}
		VARIABLESET
		{
			coloredObject = MFD_buttonR10
			passiveColor = 0,0,0,255
			activeColor = COLOR_ASET_PUSHBUTTON_BACKLIGHT_ACTIVECOLOR
			scale = 0.5,1.1
		}
		VARIABLESET
		{
			coloredObject = MFD_button_LEFT
			passiveColor = 0,0,0,255
			activeColor = COLOR_ASET_PUSHBUTTON_BACKLIGHT_ACTIVECOLOR
			scale = 0.5,1.1
		}
		VARIABLESET
		{
			coloredObject = MFD_button_RIGHT
			passiveColor = 0,0,0,255
			activeColor = COLOR_ASET_PUSHBUTTON_BACKLIGHT_ACTIVECOLOR
			scale = 0.5,1.1
		}
		VARIABLESET
		{
			coloredObject = MFD_button_PAGE
			passiveColor = 0,0,0,255
			activeColor = COLOR_ASET_PUSHBUTTON_BACKLIGHT_ACTIVECOLOR
			scale = 0.5,1.1
		}
		VARIABLESET
		{
			coloredObject = MFD_button_UP
			passiveColor = 0,0,0,255
			activeColor = COLOR_ASET_PUSHBUTTON_BACKLIGHT_ACTIVECOLOR
			scale = 0.5,1.1
		}
		VARIABLESET
		{
			coloredObject = MFD_button_DOWN
			passiveColor = 0,0,0,255
			activeColor = COLOR_ASET_PUSHBUTTON_BACKLIGHT_ACTIVECOLOR
			scale = 0.5,1.1
		}
		VARIABLESET
		{
			coloredObject = MFD_button_ENTER
			passiveColor = 0,0,0,255
			activeColor = COLOR_ASET_PUSHBUTTON_BACKLIGHT_ACTIVECOLOR
			scale = 0.5,1.1
		}
		VARIABLESET
		{
			coloredObject = MFD_button_ESC
			passiveColor = 0,0,0,255
			activeColor = COLOR_ASET_PUSHBUTTON_BACKLIGHT_ACTIVECOLOR
			scale = 0.5,1.1
		}
		VARIABLESET
		{
			coloredObject = MFD_button_HOME
			passiveColor = 0,0,0,255
			activeColor = COLOR_ASET_PUSHBUTTON_BACKLIGHT_ACTIVECOLOR
			scale = 0.5,1.1
		}
		VARIABLESET
		{
			coloredObject = MFD_button_STBY
			passiveColor = 0,0,0,255
			activeColor = COLOR_ASET_PUSHBUTTON_BACKLIGHT_ACTIVECOLOR
			scale = 0.5,1.1
		}
		VARIABLESET
		{
			coloredObject = LabelObj
			passiveColor = 0,0,0,255
			activeColor = COLOR_ASET_PUSHBUTTON_BACKLIGHT_ACTIVECOLOR
			scale = 0.5,1.1
		}
	}

	// -------------------- END OF MONITOR CONFIG ----------------------------------------
	// --------------------Power OFF animation	--------------------------------------------
	MODULE
	{
		name = JSICallbackAnimator
		variableName = CUSTOM_ALCOR_POWEROFF
 		VARIABLESET
		{
			coloredObject = MFD_Buttons_details
			passiveColor = 0,0,0,255
			activeColor = COLOR_ASET_MFD_BACKLIGHT_ACTIVECOLOR
			scale = 0.0,0.5
		}		
		VARIABLESET
		{
			coloredObject = FlatMon40x10Screen
			passiveColor = 0,0,0,255
			activeColor = 255,255,255,255
			scale = 0.0,0.5
		}
	}
}
//END FILE